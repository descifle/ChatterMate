(this.webpackJsonpchatapp=this.webpackJsonpchatapp||[]).push([[0],{119:function(e,t){},127:function(e,t,n){},128:function(e,t,n){"use strict";n.r(t);var s=n(2),c=n(0),a=n.n(c),r=n(5),i=n.n(r),l=n(9),o=n(41),j=n.n(o),u=(n(92),function(e){e.setUser;var t=Object(c.useState)(""),n=Object(l.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)(""),o=Object(l.a)(i,2),j=o[0],u=o[1],d=a.length>0?"Welcome ".concat(a):"No info";return Object(s.jsxs)("div",{className:"entry",children:[Object(s.jsx)("h1",{children:"ChatterMate"}),Object(s.jsx)("div",{children:Object(s.jsx)("h3",{children:d})}),Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a&&j&&console.log("this is me")},className:"login",children:[Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Username"}),Object(s.jsx)("input",{type:"text",value:a,onChange:function(e){return r(e.target.value)},className:"form-control"})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Password"}),Object(s.jsx)("input",{type:"password",value:j,onChange:function(e){return u(e.target.value)},className:"form-control"})]}),Object(s.jsx)("button",{className:"btn btn-danger btn-block",children:"Join"}),Object(s.jsxs)("div",{className:"divide-container",children:[Object(s.jsx)("hr",{className:"short-divide"}),Object(s.jsx)("span",{children:"or"}),Object(s.jsx)("hr",{className:"short-divide"})]}),Object(s.jsxs)("a",{href:"/users/auth/google",className:"btn btn-user btn-block",children:[Object(s.jsx)("i",{className:"fa fa-google"})," Login with Google"]})]})]})}),d=n(14),b=n(63),h=n.n(b),m=n(64),O=n.n(m),f=n(157),g=n(151);function x(e){var t=e.users,n=a.a.useState(null),c=Object(l.a)(n,2),r=c[0],i=c[1],o=Boolean(r),j=o?"simple-popover":void 0;return Object(s.jsxs)("div",{className:"online-users",children:[Object(s.jsx)(g.a,{"aria-describedby":j,variant:"contained",color:"primary",onClick:function(e){i(e.currentTarget)},children:"Online"}),Object(s.jsx)(f.a,{id:j,open:o,anchorEl:r,onClose:function(){i(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:null!==t?t.map((function(e,t){return Object(s.jsx)(g.a,{children:e.user},t)})):Object(s.jsx)("div",{children:"empty"})})]})}var v=n(158),p=n(154),N=n(155),w=n(156),S=(n(127),h()("http://localhost:3001")),y=function(e){var t=e.user,n=Object(c.useState)(""),a=Object(l.a)(n,2),r=a[0],i=a[1],o=Object(c.useState)([]),u=Object(l.a)(o,2),b=u[0],h=u[1],m=Object(c.useState)([]),f=Object(l.a)(m,2),g=f[0],y=f[1],C=Object(c.useState)(window.innerWidth>500),M=Object(l.a)(C,2),k=M[0],E=M[1],L=O()().format("h:mm"),T=function(){E(window.innerWidth>500)};Object(c.useEffect)((function(){return S.on("message",(function(e){y((function(t){return[].concat(Object(d.a)(t),[e])}))})),S.on("visitors",(function(e){h(e)})),function(){S.disconnect(),console.log("disconnected")}}),[]),Object(c.useEffect)((function(){S.emit("loggedUser",{user:t})}),[t]),Object(c.useEffect)((function(){return window.addEventListener("resize",T),function(){return window.removeEventListener("resize",T)}}));var z=g.map((function(e,n){return setTimeout((function(){var e=document.querySelector(".message-container"),t=e.scrollHeight;e.scroll(0,t)}),200),Object(s.jsxs)("div",{className:t===e.fullMsg.username?"message":"other-message",children:[Object(s.jsxs)("div",{children:[Object(s.jsx)("span",{className:t===e.fullMsg.username?"message-username":"text-white",children:e.fullMsg.username}),Object(s.jsx)("span",{className:"message-time",children:e.fullMsg.time})]}),Object(s.jsx)("p",{children:e.fullMsg.message})]},n)}));return Object(s.jsx)("div",{className:"chat-container container-fluid",children:Object(s.jsxs)("div",{className:"row h-100",children:[Object(s.jsxs)("div",{className:"col-md-3 text-center",children:[Object(s.jsx)(p.a,{position:"static",children:Object(s.jsx)(N.a,{children:Object(s.jsx)(w.a,{variant:"h6",children:"ChatterMate Instant Messaging"})})}),k?Object(s.jsx)("div",{className:"text-center",children:null!==b?b.map((function(e,t){return Object(s.jsx)(v.a,{button:!0,children:e.user},t)})):Object(s.jsx)("div",{children:"empty"})}):Object(s.jsx)(x,{users:b})]}),Object(s.jsxs)("div",{className:"messages col-md-9",children:[Object(s.jsx)("div",{className:"message-container",children:z}),Object(s.jsx)("form",{className:"chatitself",onSubmit:function(e){if(e.preventDefault(),!((n=r).length<1&&"string"==typeof n)){var n,s={username:t,message:r,time:L};j()({method:"POST",data:s,url:"/chat/message"}),S.emit("message",{fullMsg:s}),i("")}},children:Object(s.jsxs)("div",{className:"chat-bar",children:[Object(s.jsx)("input",{className:"write-message",value:r,onChange:function(e){return i(e.target.value)},placeholder:"type here to message"}),Object(s.jsx)("button",{className:"send-btn",children:"Send"})]})})]})]})})},C=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],r=n?Object(s.jsx)(y,{user:n}):Object(s.jsx)(u,{setUser:a});return Object(s.jsx)("div",{className:"kekw",children:r})},M=function(){return Object(s.jsx)(C,{})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,160)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),s(e),c(e),a(e),r(e)}))};i.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(M,{})}),document.getElementById("root")),k()},92:function(e,t,n){}},[[128,1,2]]]);
//# sourceMappingURL=main.320e653a.chunk.js.map